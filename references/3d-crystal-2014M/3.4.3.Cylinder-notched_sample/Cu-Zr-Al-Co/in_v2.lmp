# Input file for obtaining equilibrated 3D-crystal lattice of Cylinder-notched sample using LAMMPS:
# This program is for obtaining 3d-crystal lattice
# Cylinder-Notched: 50 x 100 x 50, 20566 atoms

#-------------------- Initialization -----------------------------------------------------
clear
echo both        # echoes each input script command to both log file and screen
units metal      # determines units of all quantities used in the input file 
dimension 3
boundary p p p   # periodic boundary condition

#-------------------- Atom & Lattice description ----------------------------------------
atom_style atomic 

region box block 0 50 0 100 0 50 units box # defines a geometric region of space
create_box 4 box # creates a simulation box in the specified region

lattice fcc 3.61 # lattice type and lattice parameter
region cu block 0 50 0 100 0 50 units box
create_atoms 1 region cu units box # creates copper atoms in the simulation box

# creating composition by using set command for Cu0.0625-Zr0.5625-Al0.1875-Co0.1875 alloy 
set region cu type/fraction 2 0.5625 12393 # set Zr 56.25%, randomly
set region cu type/fraction 3 0.1875 12393 # set Al 18.75%, randomly
set region cu type/fraction 4 0.1875 12393 # set Co 18.75%, randomly

#region cu1 cylinder x 50 40 10 0 50 units box # defines a geometric region of Cylinder-notch
region cu1 cylinder z 50 50 10 0 50 units box # defines a geometric region of Cylinder-notch
group crystal1 region cu1
delete_atoms group crystal1 # creates square-notch in the simulation box

region cu2 cylinder z  0 50 10 0 50 units box # defines a geometric region of Cylinder-notch
group crystal2 region cu2
delete_atoms group crystal2 # creates square-notch in the simulation box

#-------------------- Force field --------------------------------------------------------
pair_style eam/alloy
pair_coeff * * CuZrAlNiCoPdAg_Zhou04.eam.alloy Cu Zr Al Co

#-------------------- Energy Minimization ------------------------------------------------
# 0 [K], structure optimization
#minimize 1.0e-7 1.0e-8 1000 1000

#-------------------- Settings -----------------------------------------------------------
#reset_timestep 0

timestep 0.002   # sets the timestep for subsequent simulations

thermo 100 # computes and prints thermodynamic 
thermo_style custom step temp vol press etotal # specifies content of thermodynamic  data to be printed in screen

#---------- output file settings ---------- 
#dump 1 all atom 10 Cu_crystal_melt_3d_s_dump_new.lammpstrj # dumps a snapshot of atom quantities every 10 time steps to the specified file
#dump_modify 1 scale no # modifies parameters of previously defined dump command.
## A value of scale no means atom coordinates are written in absolute distance units. 
#---------------------------------------------------
dump            d1 all cfg 10 cfg/run.*.cfg mass type xs ys zs id type vx vy vz fx fy fz
dump_modify     d1 element Cu Zr Al Co
#---------------------------------------------------
#log logCu_crystal_melt_3d_s_new.data # closes the current log file, opens a new log file, and begins logging information to it

# calculates the radial distribution function (RDF) and output file
compute myRDF all rdf 100
fix 11 all ave/time 1 1 100 c_myRDF[*] file data.rdf mode vector

velocity all create 300 873847 rot yes mom yes dist gaussian # sets the velocity of a group of atoms

#-------------------- Run the simulation -------------------------------------------------
fix 1 all npt temp 100 100 0.1 iso 0 0 0.1 # temp and pressure conserve
run 1000 # program is run for 1000 iterations
unfix 1  # deletes the previously defined fix 1

#-------------------- Output data file ---------------------------------------------------
write_data Test.dat

#-------------------- End ----------------------------------------------------------------